import{r as n,j as e,l as b}from"./index-kK03ZpaK.js";import{j,k as f}from"./index-BGJPHazr.js";function v(){const i=new Date().getFullYear(),[o,x]=n.useState(i),[d,u]=n.useState(new Date().getMonth()+1),[r,c]=n.useState(null),[l,m]=n.useState(!1),g=["Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"],h=Array.from({length:5},(a,s)=>i-s),p=async()=>{m(!0),c(null);try{const a=await b.get("/reports/monthly",{params:{year:o,month:d}});c(a.data.data)}catch(a){console.error("Gagal membuat laporan:",a),alert("Gagal membuat laporan. Silakan coba lagi.")}finally{m(!1)}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[e.jsxs("h1",{className:"text-2xl font-bold text-gray-800 mb-4 flex items-center",children:[e.jsx(j,{className:"mr-3"})," Buat Laporan Bulanan"]}),e.jsxs("div",{className:"flex flex-wrap items-end gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"year",className:"block text-sm font-medium text-gray-700",children:"Tahun"}),e.jsx("select",{id:"year",value:o,onChange:a=>x(a.target.value),className:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md",children:h.map(a=>e.jsx("option",{value:a,children:a},a))})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"month",className:"block text-sm font-medium text-gray-700",children:"Bulan"}),e.jsx("select",{id:"month",value:d,onChange:a=>u(a.target.value),className:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md",children:g.map((a,s)=>e.jsx("option",{value:s+1,children:a},s+1))})]}),e.jsxs("button",{onClick:p,disabled:l,className:"px-6 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 disabled:bg-indigo-400 flex items-center",children:[e.jsx(f,{className:"mr-2"}),l?"Membuat...":"Buat Laporan"]})]})]}),l&&e.jsx("div",{className:"flex justify-center items-center h-40",children:e.jsx("div",{className:"loader"})}),r&&e.jsx("div",{className:"bg-white p-6 rounded-lg shadow-md",children:r.length>0?e.jsx("div",{className:"space-y-8",children:r.map(a=>e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-800 border-b-2 border-indigo-500 pb-2 mb-4",children:[a.nomor,". ",a.nama_kategori]}),a.kegiatan.map(s=>s.rencana_aksi.map(t=>e.jsxs("div",{className:"p-4 mb-3 border rounded-lg",children:[e.jsx("p",{className:"font-semibold",children:t.deskripsi_aksi}),e.jsxs("div",{className:"flex flex-wrap text-sm text-gray-600 mt-2 gap-x-6 gap-y-1",children:[e.jsxs("span",{children:[e.jsx("strong",{children:"Status:"})," ",t.status]}),e.jsxs("span",{children:[e.jsx("strong",{children:"Target:"})," ",t.target_tanggal_formatted]}),e.jsxs("span",{children:[e.jsx("strong",{children:"PIC:"})," ",t.assigned_to?.name||"N/A"]}),e.jsxs("span",{children:[e.jsx("strong",{children:"Progress:"})," ",t.progress,"%"]})]})]},t.id)))]},a.id))}):e.jsx("p",{className:"text-center text-gray-500 py-10",children:"Tidak ada data rencana aksi yang ditemukan untuk periode yang dipilih."})})]})}export{v as default};
