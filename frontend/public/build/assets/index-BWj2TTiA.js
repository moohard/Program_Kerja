import{r as t,j as e,l as p}from"./main-CKtUqjP5.js";import{i as f,f as j}from"./index-B1BQ6o6j.js";import{s as N}from"./ConfirmationToast-CIdDE9v9.js";function v({item:r,onClose:o,onSave:c}){const[n,m]=t.useState(r?r.nomor:""),[i,x]=t.useState(r?r.nama_kategori:""),l=s=>{s.preventDefault(),c({nomor:n,nama_kategori:i})};return e.jsx("div",{className:"fixed inset-0 bg-transparent flex justify-center items-center z-50","data-cy":"kategori-modal",children:e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-xl w-full max-w-md",children:[e.jsxs("h2",{className:"text-xl font-bold mb-4",children:[r?"Edit":"Tambah"," Kategori"]}),e.jsxs("form",{onSubmit:l,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Nomor"}),e.jsx("input",{type:"number",value:n,onChange:s=>m(s.target.value),required:!0,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm sm:text-sm","data-cy":"nomor-input"})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Nama Kategori"}),e.jsx("input",{type:"text",value:i,onChange:s=>x(s.target.value),required:!0,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm sm:text-sm","data-cy":"nama-kategori-input"})]}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx("button",{type:"button",onClick:o,className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300","data-cy":"cancel-button",children:"Batal"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700","data-cy":"save-kategori-button",children:"Simpan"})]})]})]})})}const K=()=>{const[r,o]=t.useState([]),[c,n]=t.useState(!1),[m,i]=t.useState(null),[x,l]=t.useState(!0),[s,u]=t.useState(null),d=t.useCallback(async()=>{l(!0);try{const a=await p.get("/kategori-utama");o(a.data.data),u(null)}catch{u("Gagal memuat data. Silakan coba lagi."),toast.error("Gagal memuat data.")}finally{l(!1)}},[]);t.useEffect(()=>{d()},[d]);const g=(a=null)=>{i(a),n(!0)},h=()=>{n(!1),i(null)},b=()=>{d(),h()},y=a=>{N("Yakin ingin menghapus item ini?",async()=>{try{await p.delete(`/kategori-utama/${a}`),toast.success("Kategori berhasil dihapus."),d()}catch{toast.error("Gagal menghapus kategori.")}})};return e.jsxs("div",{className:"bg-white p-8 rounded-lg shadow",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center mb-6 space-y-4 md:space-y-0",children:[e.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:"Master: Kategori Utama"}),e.jsx("button",{onClick:()=>g(),className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 self-start md:self-auto","data-cy":"add-kategori-button",children:"Tambah"})]}),x?e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:"loader"})}):s?e.jsx("div",{className:"p-3 bg-red-100 text-red-700 rounded-md",children:s}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full bg-white",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"No."}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Nama Kategori"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Aksi"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200","data-cy":"kategori-table-body",children:r.map(a=>e.jsxs("tr",{"data-cy":`kategori-row-${a.id}`,children:[e.jsx("td",{className:"px-6 py-4",children:a.nomor}),e.jsx("td",{className:"px-6 py-4",children:a.nama_kategori}),e.jsx("td",{className:"px-6 py-4 text-right text-sm font-medium",children:e.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[e.jsxs("button",{onClick:()=>g(a),className:"flex items-center text-indigo-600 hover:text-indigo-900","data-cy":`edit-kategori-button-${a.id}`,children:[e.jsx(f,{size:16}),e.jsx("span",{className:"hidden md:inline ml-1",children:"Edit"})]}),e.jsxs("button",{onClick:()=>y(a.id),className:"flex items-center text-red-600 hover:text-red-900","data-cy":`delete-kategori-button-${a.id}`,children:[e.jsx(j,{size:16}),e.jsx("span",{className:"hidden md:inline ml-1",children:"Hapus"})]})]})})]},a.id))})]})}),c&&e.jsx(v,{item:m,onClose:h,onSave:b})]})};export{K as default};
